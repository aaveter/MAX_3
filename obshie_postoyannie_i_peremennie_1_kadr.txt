stop();

import MaxMain;

var main:MaxMain = new MaxMain(stage);

//Форматы текстов
var Black_text:TextFormat = new TextFormat();
var INPUT_text:TextFormat = new TextFormat();
var STATIC_text:TextFormat = new TextFormat();
var NORMAL:TextFormat=new TextFormat();

INPUT_text.bold=true;
INPUT_text.size=18;
INPUT_text.font="Tahoma";
INPUT_text.color=0x000099;
INPUT_text.align=TextFormatAlign.LEFT;

STATIC_text.bold=true;
STATIC_text.size=18;
STATIC_text.font="Tahoma";
STATIC_text.color=0x999999;
STATIC_text.align=TextFormatAlign.CENTER;

Black_text.bold=true;
Black_text.size=35;
Black_text.font="Tahoma";
Black_text.color=0x000000;
Black_text.align=TextFormatAlign.CENTER;

NORMAL.align=TextFormatAlign.CENTER;
NORMAL.font="Tahoma";
NORMAL.size=20;
NORMAL.bold=true;
//Конец формата текстов



//Список всех констант для изменения
var doc_x:int=stage.stageWidth;//1200;//Размер документа по x
var doc_y:int=stage.stageHeight;//Размер документа по y
     trace("doc_x="+doc_x.toString()+" doc_y="+doc_y.toString());
var map_scroll:int=1;//Размер сдвига при прокрутки карты
var visible_map_x:int=doc_x-50;//Размер показываемой карты
var visible_map_y:int=doc_y-50;//Размер показываемой карты
var map_x:int=250;
var map_y:int=0;
var cell_pixels:int=100;//Количество пикселей из которого состоит клетка.
var cell_size=cell_pixels;//Размер клетки изначальна она равна кол-ву пикселей, но при маштабировании будет меняться.
var mini_cs:int=4;//Размер одной клетки на мини-карте в пикселях.
var green:BitmapData=new green_class(0,0);//Трава
var water:BitmapData=new water_class(0,0);//Вода
var montain:BitmapData=new montain_class(0,0);//Гора
var green_dark:BitmapData=new green_dark_class(0,0);//Трава
var water_dark:BitmapData=new water_dark_class(0,0);//Вода
var montain_dark:BitmapData=new montain_dark_class(0,0);//Гора
var mini_green:BitmapData=new mini_green_class(0,0);
var mini_water:BitmapData=new mini_water_class(0,0);
var mini_montain:BitmapData=new mini_montain_class(0,0);
var pd:int=10;//Минимальное расстояние между игроками
var mmd:int=10;//Расстояние между мини-картами при выборе карты для игры
var map_rect:Rectangle=new Rectangle(0,0,visible_map_x,visible_map_y);//Видимая часть карты
var step:int=0;
//Конец списка констант

//Переменные определяющие сканируемые зоны
var scan_zone:Sprite=new Sprite  ;//Вся зона
var scan_area:Array=new Array  ;//Массив отдельных видимых областей соответствует юнитам и зданиям игрока

//Константы для централизации текста в button_class
var wmb:int=75;
var wab:int=83.5;
var x_shift_b:int=2;
var y_shift_b:int=3.5;
//Конец списка констант для централизации текста в button_class

//Массив кнопок button_class с текстом и функция по настройке текста
var bp_array:Array=new Array  ;
var b_array:Array=new Array  ;
var bt_array:Array=new Array  ;
var spec_text:String=new String  ;
var spec_format:TextFormat=STATIC_text;
var Int:int=40;
var ai:int=0;

function b_t_create() {
	ai+=1;
	bp_array[ai]=new Sprite  ;
	b_array[ai]=new button_class  ;
	bt_array[ai]=new TextField  ;
	bp_array[ai].addChild(b_array[ai]);
	bp_array[ai].addChild(bt_array[ai]);
	addChild(bp_array[ai]);
	bt_array[ai].text=spec_text;
	spec_format.size=Int;
	bt_array[ai].setTextFormat(spec_format);
	while (bt_array[ai].textWidth>bp_array[ai].width*0.8) {
		Int-=1;
		spec_format.size=Int;
		bt_array[ai].setTextFormat(spec_format);
	}
	bt_array[ai].width=bp_array[ai].width;
	bt_array[ai].y = (b_array[ai].height*wmb/wab-bt_array[ai].textHeight)/2;
	bt_array[ai].mouseEnabled=false;
	b_array[ai].addEventListener(MouseEvent.MOUSE_DOWN, b_down);
	function b_down(event:MouseEvent) {
		bt_array[ai].x-=x_shift_b;
		bt_array[ai].y+=y_shift_b;
	}
}